import streamlit as st

# 1. CONFIGURACI√ìN
st.set_page_config(page_title="Pase de Alcohol DUSA", page_icon="üß™", layout="centered")

# CSS para ajustes definitivos
st.markdown("""
    <style>
    /* 1. M√ÅS MARGEN SUPERIOR PARA EVITAR CORTES */
    .block-container {padding-top: 3.5rem; padding-bottom: 2rem;}
    
    /* Resultados num√©ricos */
    [data-testid="stMetricValue"] {font-size: 1.8rem; font-weight: bold;}
    div[data-testid="stMetric"]:nth-child(1) [data-testid="stMetricValue"] {color: #D35400;}
    
    /* F.P. S√∫per pegado a los resultados con margen inferior */
    .fp-final {
        font-size: 1.05rem;
        color: #566573;
        margin-top: -10px;
        margin-bottom: 20px;
        font-weight: 500;
    }
    
    /* Alineaci√≥n de logo y textos */
    .header-container {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 0.5rem;
    }
    
    /* AJUSTES DE TEXTO */
    .titulo-mini {
        font-size: 0.75rem;
        margin: 0;
        text-transform: uppercase;
        font-weight: bold;
        color: #808B96;
    }
    .subtitulo-mini {
        font-size: 0.85rem;
        margin: 0;
        color: #2E4053;
        font-weight: bold;
    }
    .autor-text {
        margin: 0;
        font-size: 0.95rem;
        color: #21618C; /* El azul que te gust√≥ */
        font-weight: 500;
    }
    </style>
    """, unsafe_allow_html=True)

def obtener_fp(grado):
    puntos = {
        50.0: 1.0720, 50.1: 1.0723, 50.2: 1.0726, 50.3: 1.0729, 50.4: 1.0732, 50.5: 1.0735, 50.6: 1.0738, 50.7: 1.0741, 50.8: 1.0744, 50.9: 1.0747,
        51.0: 1.0750, 51.1: 1.0752, 51.2: 1.0754, 51.3: 1.0756, 51.4: 1.0758, 51.5: 1.0760, 51.6: 1.0762, 51.7: 1.0764, 51.8: 1.0766, 51.9: 1.0768,
        52.0: 1.0770, 52.1: 1.0773, 52.2: 1.0776, 52.3: 1.0779, 52.4: 1.0782, 52.5: 1.0785, 52.6: 1.0788, 52.7: 1.0791, 52.8: 1.0794, 52.9: 1.0797,
        53.0: 1.0800, 53.1: 1.0803, 53.2: 1.0806, 53.3: 1.0809, 53.4: 1.0812, 53.5: 1.0815, 53.6: 1.0818, 53.7: 1.0821, 53.8: 1.0824, 53.9: 1.0827,
        54.0: 1.0830, 54.1: 1.0833, 54.2: 1.0836, 54.3: 1.0839, 54.4: 1.0842, 54.5: 1.0845, 54.6: 1.0848, 54.7: 1.0851, 54.8: 1.0854, 54.9: 1.0857,
        55.0: 1.0860, 55.1: 1.0863, 55.2: 1.0866, 55.3: 1.0869, 55.4: 1.0872, 55.5: 1.0875, 55.6: 1.0878, 55.7: 1.0881, 55.8: 1.0884, 55.9: 1.0887,
        56.0: 1.0890, 56.1: 1.0892, 56.2: 1.0894, 56.3: 1.0896, 56.4: 1.0898, 56.5: 1.0900, 56.6: 1.0902, 56.7: 1.0904, 56.8: 1.0906, 56.9: 1.0908,
        57.0: 1.0910, 57.1: 1.0913, 57.2: 1.0916, 57.3: 1.0919, 57.4: 1.0922, 57.5: 1.0925, 57.6: 1.0928, 57.7: 1.0931, 57.8: 1.0934, 57.9: 1.0937,
        58.0: 1.0940, 58.1: 1.0943, 58.2: 1.0946, 58.3: 1.0949, 58.4: 1.0952, 58.5: 1.0955, 58.6: 1.0958, 58.7: 1.0961, 58.8: 1.0964, 58.9: 1.0967,
        59.0: 1.0970, 59.1: 1.0973, 59.2: 1.0976, 59.3: 1.0979, 59.4: 1.0982, 59.5: 1.0985, 59.6: 1.0988, 59.7: 1.0991, 59.8: 1.0994, 59.9: 1.0997,
        60.0: 1.1000, 60.1: 1.1003, 60.2: 1.1006, 60.3: 1.1009, 60.4: 1.1012, 60.5: 1.1015, 60.6: 1.1018, 60.7: 1.1021, 60.8: 1.1024, 60.9: 1.1027,
        61.0: 1.1030, 61.1: 1.1033, 61.2: 1.1036, 61.3: 1.1039, 61.4: 1.1042, 61.5: 1.1045, 61.6: 1.1048, 61.7: 1.1051, 61.8: 1.1054, 61.9: 1.1057,
        62.0: 1.1060, 62.1: 1.1063, 62.2: 1.1066, 62.3: 1.1069, 62.4: 1.1072, 62.5: 1.1075, 62.6: 1.1078, 62.7: 1.1081, 62.8: 1.1084, 62.9: 1.1087,
        63.0: 1.1090, 63.1: 1.1092, 63.2: 1.1094, 63.3: 1.1096, 63.4: 1.1098, 63.5: 1.1100, 63.6: 1.1102, 63.7: 1.1104, 63.8: 1.1106, 63.9: 1.1108,
        64.0: 1.1110, 64.1: 1.1113, 64.2: 1.1116, 64.3: 1.1119, 64.4: 1.1122, 64.5: 1.1125, 64.6: 1.1128, 64.7: 1.1131, 64.8: 1.1134, 64.9: 1.1137,
        65.0: 1.1140, 65.1: 1.1143, 65.2: 1.1146, 65.3: 1.1149, 65.4: 1.1152, 65.5: 1.1155, 65.6: 1.1158, 65.7: 1.1161, 65.8: 1.1164, 65.9: 1.1167,
        66.0: 1.1170, 66.1: 1.1173, 66.2: 1.1176, 66.3: 1.1179, 66.4: 1.1182, 66.5: 1.1185, 66.6: 1.1188, 66.7: 1.1191, 66.8: 1.1194, 66.9: 1.1197,
        67.0: 1.1200, 67.1: 1.1203, 67.2: 1.1206, 67.3: 1.1209, 67.4: 1.1212, 67.5: 1.1215, 67.6: 1.1218, 67.7: 1.1221, 67.8: 1.1224, 67.9: 1.1227,
        68.0: 1.1230, 68.1: 1.1233, 68.2: 1.1236, 68.3: 1.1239, 68.4: 1.1242, 68.5: 1.1245, 68.6: 1.1248, 68.7: 1.1251, 68.8: 1.1254, 68.9: 1.1257,
        69.0: 1.1260, 69.1: 1.1262, 69.2: 1.1264, 69.3: 1.1266, 69.4: 1.1268, 69.5: 1.1270, 69.6: 1.1272, 69.7: 1.1274, 69.8: 1.1276, 69.9: 1.1278,
        70.0: 1.1280, 70.1: 1.1283, 70.2: 1.1286, 70.3: 1.1289, 70.4: 1.1292, 70.5: 1.1295, 70.6: 1.1298, 70.7: 1.1301, 70.8: 1.1304, 70.9: 1.1307,
        71.0: 1.1310, 71.1: 1.1313, 71.2: 1.1316, 71.3: 1.1319, 71.4: 1.1322, 71.5: 1.1325, 71.6: 1.1328, 71.7: 1.1331, 71.8: 1.1334, 71.9: 1.1337,
        72.0: 1.1340, 72.1: 1.1343, 72.2: 1.1346, 72.3: 1.1349, 72.4: 1.1352, 72.5: 1.1355, 72.6: 1.1358, 72.7: 1.1361, 72.8: 1.1364, 72.9: 1.1367,
        73.0: 1.1370, 73.1: 1.1372, 73.2: 1.1374, 73.3: 1.1376, 73.4: 1.1378, 73.5: 1.1380, 73.6: 1.1382, 73.7: 1.1384, 73.8: 1.1386, 73.9: 1.1388,
        74.0: 1.1390, 74.1: 1.1393, 74.2: 1.1396, 74.3: 1.1399, 74.4: 1.1402, 74.5: 1.1405, 74.6: 1.1408, 74.7: 1.1411, 74.8: 1.1414, 74.9: 1.1417,
        75.0: 1.1420, 75.1: 1.1423, 75.2: 1.1426, 75.3: 1.1429, 75.4: 1.1432, 75.5: 1.1435, 75.6: 1.1438, 75.7: 1.1441, 75.8: 1.1444, 75.9: 1.1447,
        76.0: 1.1450, 76.1: 1.1454, 76.2: 1.1458, 76.3: 1.1462, 76.4: 1.1466, 76.5: 1.1470, 76.6: 1.1474, 76.7: 1.1478, 76.8: 1.1482, 76.9: 1.1486,
        77.0: 1.1490, 77.1: 1.1493, 77.2: 1.1496, 77.3: 1.1499, 77.4: 1.1502, 77.5: 1.1505, 77.6: 1.1508, 77.7: 1.1511, 77.8: 1.1514, 77.9: 1.1517,
        78.0: 1.1520, 78.1: 1.1524, 78.2: 1.1528, 78.3: 1.1532, 78.4: 1.1536, 78.5: 1.1540, 78.6: 1.1544, 78.7: 1.1548, 78.8: 1.1552, 78.9: 1.1556,
        79.0: 1.1560, 79.1: 1.1564, 79.2: 1.1568, 79.3: 1.1572, 79.4: 1.1576, 79.5: 1.1580, 79.6: 1.1584, 79.7: 1.1588, 79.8: 1.1592, 79.9: 1.1596,
        80.0: 1.1600, 80.1: 1.1603, 80.2: 1.1606, 80.3: 1.1609, 80.4: 1.1612, 80.5: 1.1615, 80.6: 1.1618, 80.7: 1.1621, 80.8: 1.1624, 80.9: 1.1627,
        81.0: 1.1630, 81.1: 1.1634, 81.2: 1.1638, 81.3: 1.1642, 81.4: 1.1646, 81.5: 1.1650, 81.6: 1.1654, 81.7: 1.1658, 81.8: 1.1662, 81.9: 1.1666,
        82.0: 1.1670, 82.1: 1.1674, 82.2: 1.1678, 82.3: 1.1682, 82.4: 1.1686, 82.5: 1.1690, 82.6: 1.1694, 82.7: 1.1698, 82.8: 1.1702, 82.9: 1.1706,
        83.0: 1.1710, 83.1: 1.1714, 83.2: 1.1718, 83.3: 1.1722, 83.4: 1.1726, 83.5: 1.1730, 83.6: 1.1734, 83.7: 1.1738, 83.8: 1.1742, 83.9: 1.1746,
        84.0: 1.1750, 84.1: 1.1754, 84.2: 1.1758, 84.3: 1.1762, 84.4: 1.1766, 84.5: 1.1770, 84.6: 1.1774, 84.7: 1.1778, 84.8: 1.1782, 84.9: 1.1786,
        85.0: 1.1790, 85.1: 1.1794, 85.2: 1.1798, 85.3: 1.1802, 85.4: 1.1806, 85.5: 1.1810, 85.6: 1.1814, 85.7: 1.1818, 85.8: 1.1822, 85.9: 1.1826,
        86.0: 1.1830, 86.1: 1.1834, 86.2: 1.1838, 86.3: 1.1842, 86.4: 1.1846, 86.5: 1.1850, 86.6: 1.1854, 86.7: 1.1858, 86.8: 1.1862, 86.9: 1.1866,
        87.0: 1.1870, 87.1: 1.1875, 87.2: 1.1880, 87.3: 1.1885, 87.4: 1.1890, 87.5: 1.1895, 87.6: 1.1900, 87.7: 1.1905, 87.8: 1.1910, 87.9: 1.1915,
        88.0: 1.1920, 88.1: 1.1924, 88.2: 1.1928, 88.3: 1.1932, 88.4: 1.1936, 88.5: 1.1940, 88.6: 1.1944, 88.7: 1.1948, 88.8: 1.1952, 88.9: 1.1956,
        89.0: 1.1960, 89.1: 1.1965, 89.2: 1.1970, 89.3: 1.1975, 89.4: 1.1980, 89.5: 1.1985, 89.6: 1.1990, 89.7: 1.1995, 89.8: 1.2000, 89.9: 1.2005,
        90.0: 1.2010, 90.1: 1.2015, 90.2: 1.2020, 90.3: 1.2025, 90.4: 1.2030, 90.5: 1.2035, 90.6: 1.2040, 90.7: 1.2045, 90.8: 1.2050, 90.9: 1.2055,
        91.0: 1.2060, 91.1: 1.2065, 91.2: 1.2070, 91.3: 1.2075, 91.4: 1.2080, 91.5: 1.2085, 91.6: 1.2090, 91.7: 1.2095, 91.8: 1.2100, 91.9: 1.2105,
        92.0: 1.2110, 92.1: 1.2115, 92.2: 1.2120, 92.3: 1.2125, 92.4: 1.2130, 92.5: 1.2135, 92.6: 1.2140, 92.7: 1.2145, 92.8: 1.2150, 92.9: 1.2155,
        93.0: 1.2160, 93.1: 1.2166, 93.2: 1.2172, 93.3: 1.2178, 93.4: 1.2184, 93.5: 1.2190, 93.6: 1.2196, 93.7: 1.2202, 93.8: 1.2208, 93.9: 1.2214,
        94.0: 1.2220, 94.1: 1.2226, 94.2: 1.2232, 94.3: 1.2238, 94.4: 1.2244, 94.5: 1.2250, 94.6: 1.2256, 94.7: 1.2262, 94.8: 1.2268, 94.9: 1.2274,
        95.0: 1.2280, 95.1: 1.2286, 95.2: 1.2292, 95.3: 1.2298, 95.4: 1.2304, 95.5: 1.2310, 95.6: 1.2316, 95.7: 1.2322, 95.8: 1.2328, 95.9: 1.2334,
        96.0: 1.2340, 96.1: 1.2346, 96.2: 1.2352, 96.3: 1.2358, 96.4: 1.2364, 96.5: 1.2370, 96.6: 1.2376, 96.7: 1.2382, 96.8: 1.2388, 96.9: 1.2394,
        97.0: 1.2400, 97.1: 1.2407, 97.2: 1.2414, 97.3: 1.2421, 97.4: 1.2428, 97.5: 1.2435, 97.6: 1.2442, 97.7: 1.2449, 97.8: 1.2456, 97.9: 1.2463,
        98.0: 1.2470, 98.1: 1.2477, 98.2: 1.2484, 98.3: 1.2491, 98.4: 1.2498, 98.5: 1.2505, 98.6: 1.2512, 98.7: 1.2519, 98.8: 1.2526, 98.9: 1.2533,
        99.0: 1.2540, 99.1: 1.2548, 99.2: 1.2556, 99.3: 1.2564, 99.4: 1.2572, 99.5: 1.2580, 99.6: 1.2588, 99.7: 1.2596, 99.8: 1.2604, 99.9: 1.2612,
        100.0: 1.2620
    }
    if grado in puntos: return puntos[grado]
    g_base = int(grado)
    g_next = g_base + 1
    if g_base in puntos and g_next in puntos:
        ratio = (grado - g_base)
        return puntos[g_base] + ratio * (puntos[g_next] - puntos[g_base])
    return None

# ENCABEZADO
URL_LOGO = "https://media.licdn.com/dms/image/v2/C4E0BAQGROeCPt2-5rQ/company-logo_200_200/company-logo_200_200/0/1630651014568/destileras_unidas_s_a_logo?e=2147483647&v=beta&t=4KCIm7iySF8w6uXTN9ISvF6zPFRGhe8L3MTN2oGJh34"

st.markdown(f"""
    <div class="header-container">
        <img src="{URL_LOGO}" width="50">
        <div>
            <p class="titulo-mini">Calculadora de Alcohol</p>
            <p class="subtitulo-mini">Pase de Alcohol</p>
            <p class="autor-text">¬© Edwin Freitez</p>
        </div>
    </div>
    """, unsafe_allow_html=True)

# ENTRADA DE DATOS
c1, c2 = st.columns(2)
with c1:
    entrada_g = st.number_input("Grado Real (¬∞GL):", 50.0, 100.0, 96.0, 0.1, format="%.1f")
with c2:
    # 2. LAA POR DEFECTO EN BLANCO (None)
    laa = st.number_input("LAA Solicitados:", min_value=0, value=None, step=1, placeholder="Ingrese LAA")

if st.button("CALCULAR", use_container_width=True):
    if laa is not None:
        fp = obtener_fp(entrada_g)
        
        if fp:
            vol_bruto = (laa / entrada_g) * 100
            peso_bruto = vol_bruto / fp
            
            v_fmt = "{:,}".format(round(vol_bruto)).replace(',', '.')
            p_fmt = "{:,}".format(round(peso_bruto)).replace(',', '.')
            
            st.write(f"Resultados para **{entrada_g}¬∞GL**:")
            
            # RESULTADOS
            st.metric(label="‚öñÔ∏è PESAR EN ROMANA:", value=f"{p_fmt} Kg")
            st.metric(label="üß™ VOLUMEN REAL:", value=f"{v_fmt} Lts")
            
            # F.P. CON ESPACIO AL FINAL
            st.markdown(f'<div class="fp-final">Factor de Peso: {fp:.4f}</div>', unsafe_allow_html=True)
            st.write("") 
        else:
            st.error("Error en rango de grado.")
    else:
        st.warning("Por favor, ingrese el valor de LAA.")
